\hypertarget{can__funzionale_8cpp}{\section{can\-\_\-funzionale.\-cpp File Reference}
\label{can__funzionale_8cpp}\index{can\-\_\-funzionale.\-cpp@{can\-\_\-funzionale.\-cpp}}
}


C\-A\-N funzionale module implementation.  


{\ttfamily \#include \char`\"{}can\-\_\-funzionale.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}def.\-h\char`\"{}}\\*
{\ttfamily \#include $<$due\-\_\-can.\-h$>$}\\*
{\ttfamily \#include $<$Due\-Timer.\-h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
volatile bool \hyperlink{group___c_a_n__funzionale__group_gaf1acdfa5537f47656edd6ffa3e7c24bd}{can\-\_\-funzionale\-\_\-initialized} ()
\begin{DoxyCompactList}\small\item\em This function returns C\-A\-N funzionale initialization status. \end{DoxyCompactList}\item 
void \hyperlink{group___c_a_n__funzionale__group_gac93bbbf1b84f1bc82b26d54d7f898172}{can\-\_\-funzionale\-\_\-send\-\_\-sync} ()
\begin{DoxyCompactList}\small\item\em This function sends a periodic C\-A\-N\-Open sync message to inverter slave node. \end{DoxyCompactList}\item 
void \hyperlink{group___c_a_n__funzionale__group_gaf4990e00c0c4a9f9eeb9cb5bdaecfa94}{C\-A\-N\-\_\-\-F\-U\-N\-Z\-\_\-\-B\-O\-O\-T\-U\-P\-\_\-\-C\-B} (C\-A\-N\-\_\-\-F\-R\-A\-M\-E $\ast$frame)
\begin{DoxyCompactList}\small\item\em This function manage boot-\/up message sent over C\-A\-N funzionale network by inverter slave node. Upon boot-\/up message reception the V\-C\-U send a S\-D\-O client request for check inverter vendor I\-D; then inverter is considered online over C\-A\-N funzionale network. \end{DoxyCompactList}\item 
void \hyperlink{group___c_a_n__funzionale__group_ga81bbc4c65d579febfbcae399f0ecbffc}{C\-A\-N\-\_\-\-F\-U\-N\-Z\-\_\-\-V\-E\-N\-D\-O\-R\-\_\-\-I\-D\-\_\-\-C\-B} (C\-A\-N\-\_\-\-F\-R\-A\-M\-E $\ast$frame)
\begin{DoxyCompactList}\small\item\em This function manage S\-D\-O server response with inverter Vendor I\-D. V\-C\-U sends N\-M\-T operational and P\-D\-Os to enable P\-W\-M; then inverter is considered correctly configured and a timer is started for sending periodic sync messages. \end{DoxyCompactList}\item 
void \hyperlink{group___c_a_n__funzionale__group_ga1fcfa8e31cfbfe2461328c345b5b8e19}{C\-A\-N\-\_\-\-F\-U\-N\-Z\-\_\-\-G\-E\-N\-E\-R\-A\-L\-\_\-\-C\-B} (C\-A\-N\-\_\-\-F\-R\-A\-M\-E $\ast$frame)
\begin{DoxyCompactList}\small\item\em This function manage T\-P\-D\-O from inverter and deserializes data\-: \end{DoxyCompactList}\item 
bool \hyperlink{group___c_a_n__funzionale__group_ga578b28192b0c78942fcc0452d070accb}{can\-\_\-funzionale\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em This function initialize C\-A\-N funzionale hardware port with baudrate \hyperlink{common_8h_adee7e3800c996a5a977034531d94570d}{C\-A\-N\-\_\-\-F\-U\-N\-Z\-\_\-\-B\-A\-U\-D\-R\-A\-T\-E}. Mailbox 0 is configured for receiving boot-\/up messages from inverter slave node (filter = 0x00000700 + \hyperlink{group___c_a_n__funzionale__group_ga59ea82aec4abe07072cbdad555a8c1b9}{I\-N\-V\-E\-R\-T\-E\-R\-\_\-\-N\-O\-D\-E\-\_\-\-I\-D}, mask = 0x1\-F\-F\-F\-F\-F\-F\-F); mailbox 1 is configured for receiving vendor\-I\-D S\-D\-O response from inverter (filter = 0x00000580 + \hyperlink{group___c_a_n__funzionale__group_ga59ea82aec4abe07072cbdad555a8c1b9}{I\-N\-V\-E\-R\-T\-E\-R\-\_\-\-N\-O\-D\-E\-\_\-\-I\-D}, mask = 0x1\-F\-F\-F\-F\-F\-F\-F); remaining mailboxes are configured for receiving T\-P\-D\-Os from inverter slave node (filter = 0x00000080, mask = 0x1\-F\-F\-F\-F\-C\-F\-F). \end{DoxyCompactList}\item 
volatile bool \hyperlink{group___c_a_n__funzionale__group_ga7d74fd826c5df3b86fd751f91c61671f}{can\-\_\-funzionale\-\_\-online} ()
\begin{DoxyCompactList}\small\item\em This function returns if inverter is online and active over C\-A\-N funzionale. \end{DoxyCompactList}\item 
void \hyperlink{group___c_a_n__funzionale__group_ga41854ab275f2b3cb7efb9385502d7d65}{inverter\-\_\-torque\-\_\-request} (uint16\-\_\-t torque)
\begin{DoxyCompactList}\small\item\em This function send torque request to inverter. If inverter is active over C\-A\-N funzionale network then the request is done via R\-P\-D\-O1 viceversa it's done via analog signal. \end{DoxyCompactList}\item 
void \hyperlink{group___c_a_n__funzionale__group_ga75820e0d72b7f264a70d99f414745518}{inverter\-\_\-regen\-\_\-request} (uint16\-\_\-t regen)
\begin{DoxyCompactList}\small\item\em This function send regen request to inverter. \end{DoxyCompactList}\item 
volatile uint16\-\_\-t \hyperlink{group___c_a_n__funzionale__group_ga3c4828f57a818b8e1b2f277c2174b5da}{get\-\_\-torque\-\_\-actual\-\_\-value} ()
\begin{DoxyCompactList}\small\item\em This function return the torque value requested by inverter to motor retrieved from T\-P\-D\-O1 from inverter over C\-A\-N funzionale network. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group___c_a_n__funzionale__group_ga8cd40fe9b965184307fe5886fcef6236}{volatile bool \hyperlink{group___c_a_n__funzionale__group_ga8cd40fe9b965184307fe5886fcef6236}{can\-\_\-funz\-\_\-initialized} = false}\label{group___c_a_n__funzionale__group_ga8cd40fe9b965184307fe5886fcef6236}

\begin{DoxyCompactList}\small\item\em C\-A\-N funzionale initialization status flag (true if initialized) \end{DoxyCompactList}\item 
\hypertarget{group___c_a_n__funzionale__group_ga392f688b1edd69f29b48818a5b9b19ae}{volatile bool \hyperlink{group___c_a_n__funzionale__group_ga392f688b1edd69f29b48818a5b9b19ae}{inverter\-\_\-online} = false}\label{group___c_a_n__funzionale__group_ga392f688b1edd69f29b48818a5b9b19ae}

\begin{DoxyCompactList}\small\item\em Inverter online status flag (true if online) \end{DoxyCompactList}\item 
\hypertarget{group___c_a_n__funzionale__group_ga979fff19d884e9a83eecc2309b36ad0c}{volatile bool \hyperlink{group___c_a_n__funzionale__group_ga979fff19d884e9a83eecc2309b36ad0c}{inverter\-\_\-configured} = false}\label{group___c_a_n__funzionale__group_ga979fff19d884e9a83eecc2309b36ad0c}

\begin{DoxyCompactList}\small\item\em Inverter configured status flag (true if configured) \end{DoxyCompactList}\item 
\hypertarget{group___c_a_n__funzionale__group_ga99ead1878913db87bc7cc808a8392e21}{volatile uint16\-\_\-t \hyperlink{group___c_a_n__funzionale__group_ga99ead1878913db87bc7cc808a8392e21}{torque\-\_\-actual\-\_\-value} = 0}\label{group___c_a_n__funzionale__group_ga99ead1878913db87bc7cc808a8392e21}

\begin{DoxyCompactList}\small\item\em Torque requested by inverter to motor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
C\-A\-N funzionale module implementation. \begin{DoxyAuthor}{Author}
Arella Matteo \par
 (mail\-: \href{mailto:arella.1646983@studenti.uniroma1.it}{\tt arella.\-1646983@studenti.\-uniroma1.\-it}) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2018 
\end{DoxyDate}


Definition in file \hyperlink{can__funzionale_8cpp_source}{can\-\_\-funzionale.\-cpp}.

