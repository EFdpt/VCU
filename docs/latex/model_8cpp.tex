\hypertarget{model_8cpp}{}\section{model.\+cpp File Reference}
\label{model_8cpp}\index{model.\+cpp@{model.\+cpp}}


Board model implementation file.  


{\ttfamily \#include \char`\"{}model.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}filter.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}can\+\_\+servizi.\+h\char`\"{}}\newline
Include dependency graph for model.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{model_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group___board__model__group_ga602abb8ec84dcb3b6f854a738310ea46}{A\+D\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}}~128
\begin{DoxyCompactList}\small\item\em Size (bytes) of buffer for store each A\+DC channel data with D\+MA. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_gaabe0f927d44a09f458bd5fe5ab4e2f7f}{B\+U\+F\+F\+E\+RS}}~4
\begin{DoxyCompactList}\small\item\em Number of D\+MA buffers. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_gaf0098a1eafb8a60a1c65773e1064d595}{A\+D\+C\+\_\+\+M\+IN}}~0
\begin{DoxyCompactList}\small\item\em A\+DC lower bound value. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga555a695bf58df062dc03f0e892d95cd7}{A\+D\+C\+\_\+\+M\+AX}}~4095
\begin{DoxyCompactList}\small\item\em A\+DC upper bound value. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga8b6fbd5b46174be3b86bc1ab5daa9080}{A\+D\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L\+S\+\_\+\+L\+I\+ST}}~\mbox{\hyperlink{group___board__model__group_ga99b2a7dadaf495e3c559a46440f9141f}{T\+P\+S1\+\_\+\+A\+D\+C\+\_\+\+C\+H\+A\+N\+\_\+\+N\+UM}} $\vert$ \mbox{\hyperlink{group___board__model__group_ga4cecb8c10512873904099a1a88d69ed3}{T\+P\+S2\+\_\+\+A\+D\+C\+\_\+\+C\+H\+A\+N\+\_\+\+N\+UM}} $\vert$ \mbox{\hyperlink{group___board__model__group_ga310547321c4a016c4ad19922920fadfd}{B\+R\+A\+K\+E\+\_\+\+A\+D\+C\+\_\+\+C\+H\+A\+N\+\_\+\+N\+UM}} $\vert$ \mbox{\hyperlink{group___board__model__group_ga564adb575db2620ac85e3abdd6a5bbaf}{S\+C\+\_\+\+A\+D\+C\+\_\+\+C\+H\+A\+N\+\_\+\+N\+UM}}
\begin{DoxyCompactList}\small\item\em List of A\+DC channels dedicated to each IO port. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga065dcfa648ca52ed6214008cb177de36}{A\+D\+C\+\_\+\+C\+H\+A\+N\+N\+E\+LS}}~4
\begin{DoxyCompactList}\small\item\em Number of A\+DC channels. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga7ce02d79fba23321a377a26a963e2bdf}{T\+P\+S1\+\_\+\+A\+D\+C\+\_\+\+O\+F\+F\+S\+ET}}~0
\begin{DoxyCompactList}\small\item\em Offset from D\+MA buffer. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga24019e59e805c7acf8f816e141d3d689}{T\+P\+S2\+\_\+\+A\+D\+C\+\_\+\+O\+F\+F\+S\+ET}}~1
\begin{DoxyCompactList}\small\item\em Offset from D\+MA buffer. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_gade98eccd60c9b68cde78ca4c0009a84c}{B\+R\+A\+K\+E\+\_\+\+A\+D\+C\+\_\+\+O\+F\+F\+S\+ET}}~2
\begin{DoxyCompactList}\small\item\em Offset from D\+MA buffer. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga58133efa918e1af6c0cc436137c78cc0}{S\+C\+\_\+\+A\+D\+C\+\_\+\+O\+F\+F\+S\+ET}}~3
\begin{DoxyCompactList}\small\item\em Offset from D\+MA buffer. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_gaf7b7dc9a200cb1404c280bd500fd1551}{B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+TH}}~\mbox{\hyperlink{group___board__model__group_ga602abb8ec84dcb3b6f854a738310ea46}{A\+D\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}} $\ast$ \mbox{\hyperlink{group___board__model__group_ga065dcfa648ca52ed6214008cb177de36}{A\+D\+C\+\_\+\+C\+H\+A\+N\+N\+E\+LS}}
\begin{DoxyCompactList}\small\item\em Length, in bytes, of each D\+MA buffer. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga3e1022cd2e2154437b583f7ff83f2960}{A\+P\+P\+S\+\_\+\+P\+L\+A\+U\+S\+\_\+\+R\+A\+N\+GE}}~10
\begin{DoxyCompactList}\small\item\em Size (bytes) of each A\+DC buffer. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga6741cba3daf129b6f73eed1b1db09519}{T\+P\+S1\+\_\+\+U\+P\+P\+E\+R\+\_\+\+B\+O\+U\+ND}}~2482
\begin{DoxyCompactList}\small\item\em First A\+P\+PS max output voltage (2V) \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga9c9aa914f6b372d9ef3f15ce4108da6a}{T\+P\+S1\+\_\+\+L\+O\+W\+E\+R\+\_\+\+B\+O\+U\+ND}}~993
\begin{DoxyCompactList}\small\item\em First A\+P\+PS min output voltage (0.\+8V) \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_gac8be8d89c699c40b79d04c0fdf6238f4}{T\+P\+S2\+\_\+\+U\+P\+P\+E\+R\+\_\+\+B\+O\+U\+ND}}~1241
\begin{DoxyCompactList}\small\item\em Second A\+P\+PS max output voltage (1V) \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_gadfcc723e175ac44e73e38407299ac875}{T\+P\+S2\+\_\+\+L\+O\+W\+E\+R\+\_\+\+B\+O\+U\+ND}}~497
\begin{DoxyCompactList}\small\item\em Second A\+P\+PS min output voltage (0.\+4V) \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga891de03ab9e1bd9a92ffffe69a1b10ca}{B\+R\+A\+K\+E\+\_\+\+U\+P\+P\+E\+R\+\_\+\+B\+O\+U\+ND}}~0
\begin{DoxyCompactList}\small\item\em Brake sensor max output voltage (T\+O\+DO\+: check Voutmax) \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___board__model__group_ga0aed20cafcc206360abda47b125432c7}{B\+R\+A\+K\+E\+\_\+\+L\+O\+W\+E\+R\+\_\+\+B\+O\+U\+ND}}~\mbox{\hyperlink{group___board__model__group_ga555a695bf58df062dc03f0e892d95cd7}{A\+D\+C\+\_\+\+M\+AX}}
\begin{DoxyCompactList}\small\item\em Brake sensor min output voltage (T\+O\+DO\+: check Voutmin) \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___board__model__group_gaedc241164d501dcbc52cde232333c9cf}{A\+D\+C\+\_\+\+Handler}} ()
\begin{DoxyCompactList}\small\item\em A\+DC I\+RQ handler. When A\+DC buffer is filled D\+MA pointer is linked to next buffer available. Then acquired data are filtered. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___board__model__group_gace5a444da39d4366693503c53f0841c2}{model\+\_\+init}} ()
\begin{DoxyCompactList}\small\item\em This function initializes hardware board. Both A\+P\+PS and brake pedal position sensor are acquired by analog signals for fault tolerance in case of C\+AN servizi fault. \end{DoxyCompactList}\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___board__model__group_ga9239a95f68fab3d9b6832fbe85eb87cd}{get\+\_\+tps1\+\_\+percentage}} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of the first A\+P\+PS in percentage, retrieved by C\+AN servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___board__model__group_gae563bbe9e3c31913df498ebd7cbf6c10}{get\+\_\+tps2\+\_\+percentage}} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of the second A\+P\+PS in percentage, retrieved by C\+AN servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___board__model__group_ga6db41e7368919bc4dfafaf4e400ae1a9}{get\+\_\+brake\+\_\+percentage}} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of the brake pedal position sensor in percentage, retrieved by C\+AN servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{group___board__model__group_gae0acabf32ee7f2a82b2f9149ba3d1978}{get\+\_\+apps\+\_\+plausibility}} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of A\+P\+PS plausibility retrieved by C\+AN servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{group___board__model__group_gad47b702f79115e19d75b22f39b45efeb}{get\+\_\+brake\+\_\+plausibility}} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of brake plausibility retrieved by C\+AN servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_ga36eddbc000c8d1820fd2a644a39c87ea}{get\+\_\+\+S\+C\+\_\+value}} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of the SC. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___board__model__group_ga7c7f5690cca986bc3fb2f6dcbda24690}{tps1\+\_\+adc\+\_\+percentage}} = 0
\begin{DoxyCompactList}\small\item\em First A\+P\+PS percentage value retrieved by analog tps1 signal (\mbox{\hyperlink{group___board__model__group_gae9aa914854f611488701c96a330b0bd4}{T\+P\+S1\+\_\+\+P\+IN}}) \end{DoxyCompactList}\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___board__model__group_gae1f465253d690605c0948394a3f055f4}{tps2\+\_\+adc\+\_\+percentage}} = 0
\begin{DoxyCompactList}\small\item\em Second A\+P\+PS percentage value retrieved by analog tps2 signal (\mbox{\hyperlink{group___board__model__group_gab13a816bae3ca994897fc6f1cb590a67}{T\+P\+S2\+\_\+\+P\+IN}}) \end{DoxyCompactList}\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___board__model__group_ga709add26e40f60e3add32981ea2a5868}{brake\+\_\+adc\+\_\+percentage}} = 0
\begin{DoxyCompactList}\small\item\em Brake pedal position sensor percentage value retrieved by analog brake signal (\mbox{\hyperlink{group___board__model__group_gad632b56bf4c6259a390c3db91607078e}{B\+R\+A\+K\+E\+\_\+\+P\+IN}}) \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{group___board__model__group_ga3e919d1e6477d52b4ccddd497351d3ec}{apps\+\_\+adc\+\_\+plausibility}} = true
\begin{DoxyCompactList}\small\item\em A\+P\+PS plausibility status retrieved by analog acquisition. \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{group___board__model__group_gaf6aa7f974533c4306128757d0634572a}{brake\+\_\+adc\+\_\+plausibility}} = true
\begin{DoxyCompactList}\small\item\em Brake plausibility status retrieved by analog acquisition. \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_ga3d6043851868b7da3c1d6381f835a559}{tps1\+\_\+value}} = 0
\begin{DoxyCompactList}\small\item\em First A\+P\+PS value retrieved directly by analog tps1 signal (\mbox{\hyperlink{group___board__model__group_gae9aa914854f611488701c96a330b0bd4}{T\+P\+S1\+\_\+\+P\+IN}}) and filtered after D\+MA buffer is filled entirely. \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_gaa8a9b03858f40eadfd5d3d6c3e266834}{tps2\+\_\+value}} = 0
\begin{DoxyCompactList}\small\item\em Second A\+P\+PS value retrieved directly by analog tps2 signal (\mbox{\hyperlink{group___board__model__group_gab13a816bae3ca994897fc6f1cb590a67}{T\+P\+S2\+\_\+\+P\+IN}}) and filtered after D\+MA buffer is filled entirely. \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_gad7966e70fb4bebc6947eb3fbb059a3c9}{brake\+\_\+value}} = 0
\begin{DoxyCompactList}\small\item\em Brake pedal position sensor value retrieved directly by analog brake signal (\mbox{\hyperlink{group___board__model__group_gad632b56bf4c6259a390c3db91607078e}{B\+R\+A\+K\+E\+\_\+\+P\+IN}}) and filtered after D\+MA buffer is filled entirely. \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_ga0b4151ed3267a5fae4789f4b3ffe7bbd}{S\+C\+\_\+value}} = 0
\begin{DoxyCompactList}\small\item\em SC value retrieved directly by analog SC signal (\mbox{\hyperlink{group___board__model__group_gabbdb157ae4ad39d102935c21fa30d1c5}{S\+C\+\_\+\+P\+IN}}) and filtered after D\+MA buffer is filled entirely. \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_gaf1d46fb483b2a63c3da25c11688af7c4}{tps1\+\_\+max}} = 2482
\begin{DoxyCompactList}\small\item\em First A\+P\+PS max output voltage (equals to \mbox{\hyperlink{group___board__model__group_ga6741cba3daf129b6f73eed1b1db09519}{T\+P\+S1\+\_\+\+U\+P\+P\+E\+R\+\_\+\+B\+O\+U\+ND}}) \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_gab7d6ace1f9174e39ed6abbe4aaceb7f4}{tps1\+\_\+min}} = 993
\begin{DoxyCompactList}\small\item\em First A\+P\+PS min output voltage (equals to \mbox{\hyperlink{group___board__model__group_ga9c9aa914f6b372d9ef3f15ce4108da6a}{T\+P\+S1\+\_\+\+L\+O\+W\+E\+R\+\_\+\+B\+O\+U\+ND}}) \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_ga53381436ea8db96c356db8b305bec988}{tps2\+\_\+max}} = 1241
\begin{DoxyCompactList}\small\item\em Second A\+P\+PS max output voltage (equals to \mbox{\hyperlink{group___board__model__group_gac8be8d89c699c40b79d04c0fdf6238f4}{T\+P\+S2\+\_\+\+U\+P\+P\+E\+R\+\_\+\+B\+O\+U\+ND}}) \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_ga4e7715668b19738d8bfd47f2420aff02}{tps2\+\_\+min}} = 497
\begin{DoxyCompactList}\small\item\em Second A\+P\+PS min output voltage (equals to \mbox{\hyperlink{group___board__model__group_gadfcc723e175ac44e73e38407299ac875}{T\+P\+S2\+\_\+\+L\+O\+W\+E\+R\+\_\+\+B\+O\+U\+ND}}) \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_ga744857a9bc060647cfc4ad47017c5bee}{brake\+\_\+max}} = 0
\begin{DoxyCompactList}\small\item\em Brake sensor max output voltage (equals to \mbox{\hyperlink{group___board__model__group_ga891de03ab9e1bd9a92ffffe69a1b10ca}{B\+R\+A\+K\+E\+\_\+\+U\+P\+P\+E\+R\+\_\+\+B\+O\+U\+ND}}) \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_ga779ee9b904930e3cfb165e70edfecd02}{brake\+\_\+min}} = 4095
\begin{DoxyCompactList}\small\item\em Brake sensor min output voltage (equals to \mbox{\hyperlink{group___board__model__group_ga0aed20cafcc206360abda47b125432c7}{B\+R\+A\+K\+E\+\_\+\+L\+O\+W\+E\+R\+\_\+\+B\+O\+U\+ND}}) \end{DoxyCompactList}\item 
volatile int \mbox{\hyperlink{group___board__model__group_gad2658b77f345b15c03759c02d1ba0e81}{bufn}}
\begin{DoxyCompactList}\small\item\em D\+MA buffer pointer. \end{DoxyCompactList}\item 
volatile int \mbox{\hyperlink{group___board__model__group_gafef4d6ed48b3edc5f7a74defba82e7d8}{obufn}}
\begin{DoxyCompactList}\small\item\em D\+MA buffer pointer. \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{group___board__model__group_gabaadbcc3b48e8ec3798741a74a672046}{buf}} \mbox{[}4\mbox{]}\mbox{[}128 $\ast$4\mbox{]}
\begin{DoxyCompactList}\small\item\em D\+MA buffers\+: \mbox{\hyperlink{group___board__model__group_gaabe0f927d44a09f458bd5fe5ab4e2f7f}{B\+U\+F\+F\+E\+RS}} number of buffers each of \mbox{\hyperlink{group___board__model__group_gaf7b7dc9a200cb1404c280bd500fd1551}{B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+TH}} size; D\+MA is configured in cyclic mode\+: after one of \mbox{\hyperlink{group___board__model__group_gaabe0f927d44a09f458bd5fe5ab4e2f7f}{B\+U\+F\+F\+E\+RS}} is filled then D\+MA transfer head moves to next buffer in circular indexing. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Board model implementation file. 

\begin{DoxyAuthor}{Author}
Arella Matteo ~\newline
 (mail\+: \href{mailto:arella.1646983@studenti.uniroma1.it}{\tt arella.\+1646983@studenti.\+uniroma1.\+it}) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2018 
\end{DoxyDate}
