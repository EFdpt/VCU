\hypertarget{model_8cpp}{\section{model.\-cpp File Reference}
\label{model_8cpp}\index{model.\-cpp@{model.\-cpp}}
}


Board model implementation file.  


{\ttfamily \#include \char`\"{}model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}filter.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}can\-\_\-servizi.\-h\char`\"{}}\\*
{\ttfamily \#include $<$Due\-Flash\-Storage.\-h$>$}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group___board__model__group_ga602abb8ec84dcb3b6f854a738310ea46}{\#define \hyperlink{group___board__model__group_ga602abb8ec84dcb3b6f854a738310ea46}{A\-D\-C\-\_\-\-B\-U\-F\-F\-E\-R\-\_\-\-S\-I\-Z\-E}~128}\label{group___board__model__group_ga602abb8ec84dcb3b6f854a738310ea46}

\begin{DoxyCompactList}\small\item\em Size (bytes) of buffer for store each A\-D\-C channel data. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gaabe0f927d44a09f458bd5fe5ab4e2f7f}{\#define \hyperlink{group___board__model__group_gaabe0f927d44a09f458bd5fe5ab4e2f7f}{B\-U\-F\-F\-E\-R\-S}~4}\label{group___board__model__group_gaabe0f927d44a09f458bd5fe5ab4e2f7f}

\begin{DoxyCompactList}\small\item\em Number of A\-D\-C buffers. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gaf0098a1eafb8a60a1c65773e1064d595}{\#define \hyperlink{group___board__model__group_gaf0098a1eafb8a60a1c65773e1064d595}{A\-D\-C\-\_\-\-M\-I\-N}~0}\label{group___board__model__group_gaf0098a1eafb8a60a1c65773e1064d595}

\begin{DoxyCompactList}\small\item\em A\-D\-C lower bound value. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga555a695bf58df062dc03f0e892d95cd7}{\#define \hyperlink{group___board__model__group_ga555a695bf58df062dc03f0e892d95cd7}{A\-D\-C\-\_\-\-M\-A\-X}~4095}\label{group___board__model__group_ga555a695bf58df062dc03f0e892d95cd7}

\begin{DoxyCompactList}\small\item\em A\-D\-C upper bound value. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga3e1022cd2e2154437b583f7ff83f2960}{\#define \hyperlink{group___board__model__group_ga3e1022cd2e2154437b583f7ff83f2960}{A\-P\-P\-S\-\_\-\-P\-L\-A\-U\-S\-\_\-\-R\-A\-N\-G\-E}~10}\label{group___board__model__group_ga3e1022cd2e2154437b583f7ff83f2960}

\begin{DoxyCompactList}\small\item\em Size (bytes) of each A\-D\-C buffer. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga8b6fbd5b46174be3b86bc1ab5daa9080}{\#define \hyperlink{group___board__model__group_ga8b6fbd5b46174be3b86bc1ab5daa9080}{A\-D\-C\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S\-\_\-\-L\-I\-S\-T}~\hyperlink{group___board__model__group_ga99b2a7dadaf495e3c559a46440f9141f}{T\-P\-S1\-\_\-\-A\-D\-C\-\_\-\-C\-H\-A\-N\-\_\-\-N\-U\-M} $|$ \hyperlink{group___board__model__group_ga4cecb8c10512873904099a1a88d69ed3}{T\-P\-S2\-\_\-\-A\-D\-C\-\_\-\-C\-H\-A\-N\-\_\-\-N\-U\-M} $|$ \hyperlink{group___board__model__group_ga310547321c4a016c4ad19922920fadfd}{B\-R\-A\-K\-E\-\_\-\-A\-D\-C\-\_\-\-C\-H\-A\-N\-\_\-\-N\-U\-M} $|$ \hyperlink{group___board__model__group_ga564adb575db2620ac85e3abdd6a5bbaf}{S\-C\-\_\-\-A\-D\-C\-\_\-\-C\-H\-A\-N\-\_\-\-N\-U\-M}}\label{group___board__model__group_ga8b6fbd5b46174be3b86bc1ab5daa9080}

\begin{DoxyCompactList}\small\item\em List of A\-D\-C channels dedicated to each board pinout. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga065dcfa648ca52ed6214008cb177de36}{\#define \hyperlink{group___board__model__group_ga065dcfa648ca52ed6214008cb177de36}{A\-D\-C\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S}~4}\label{group___board__model__group_ga065dcfa648ca52ed6214008cb177de36}

\begin{DoxyCompactList}\small\item\em Number of A\-D\-C channels. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga7ce02d79fba23321a377a26a963e2bdf}{\#define \hyperlink{group___board__model__group_ga7ce02d79fba23321a377a26a963e2bdf}{T\-P\-S1\-\_\-\-A\-D\-C\-\_\-\-O\-F\-F\-S\-E\-T}~0}\label{group___board__model__group_ga7ce02d79fba23321a377a26a963e2bdf}

\begin{DoxyCompactList}\small\item\em Offset from D\-M\-A buffer. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga24019e59e805c7acf8f816e141d3d689}{\#define \hyperlink{group___board__model__group_ga24019e59e805c7acf8f816e141d3d689}{T\-P\-S2\-\_\-\-A\-D\-C\-\_\-\-O\-F\-F\-S\-E\-T}~1}\label{group___board__model__group_ga24019e59e805c7acf8f816e141d3d689}

\begin{DoxyCompactList}\small\item\em Offset from D\-M\-A buffer. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gade98eccd60c9b68cde78ca4c0009a84c}{\#define \hyperlink{group___board__model__group_gade98eccd60c9b68cde78ca4c0009a84c}{B\-R\-A\-K\-E\-\_\-\-A\-D\-C\-\_\-\-O\-F\-F\-S\-E\-T}~2}\label{group___board__model__group_gade98eccd60c9b68cde78ca4c0009a84c}

\begin{DoxyCompactList}\small\item\em Offset from D\-M\-A buffer. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga58133efa918e1af6c0cc436137c78cc0}{\#define \hyperlink{group___board__model__group_ga58133efa918e1af6c0cc436137c78cc0}{S\-C\-\_\-\-A\-D\-C\-\_\-\-O\-F\-F\-S\-E\-T}~3}\label{group___board__model__group_ga58133efa918e1af6c0cc436137c78cc0}

\begin{DoxyCompactList}\small\item\em Offset from D\-M\-A buffer. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gaf7b7dc9a200cb1404c280bd500fd1551}{\#define \hyperlink{group___board__model__group_gaf7b7dc9a200cb1404c280bd500fd1551}{B\-U\-F\-F\-E\-R\-\_\-\-L\-E\-N\-G\-T\-H}~\hyperlink{group___board__model__group_ga602abb8ec84dcb3b6f854a738310ea46}{A\-D\-C\-\_\-\-B\-U\-F\-F\-E\-R\-\_\-\-S\-I\-Z\-E} $\ast$ \hyperlink{group___board__model__group_ga065dcfa648ca52ed6214008cb177de36}{A\-D\-C\-\_\-\-C\-H\-A\-N\-N\-E\-L\-S}}\label{group___board__model__group_gaf7b7dc9a200cb1404c280bd500fd1551}

\begin{DoxyCompactList}\small\item\em Length, in bytes, of each D\-M\-A buffer. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga6741cba3daf129b6f73eed1b1db09519}{\#define \hyperlink{group___board__model__group_ga6741cba3daf129b6f73eed1b1db09519}{T\-P\-S1\-\_\-\-U\-P\-P\-E\-R\-\_\-\-B\-O\-U\-N\-D}~2482}\label{group___board__model__group_ga6741cba3daf129b6f73eed1b1db09519}

\begin{DoxyCompactList}\small\item\em First A\-P\-P\-S max output voltage (2\-V) \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga9c9aa914f6b372d9ef3f15ce4108da6a}{\#define \hyperlink{group___board__model__group_ga9c9aa914f6b372d9ef3f15ce4108da6a}{T\-P\-S1\-\_\-\-L\-O\-W\-E\-R\-\_\-\-B\-O\-U\-N\-D}~993}\label{group___board__model__group_ga9c9aa914f6b372d9ef3f15ce4108da6a}

\begin{DoxyCompactList}\small\item\em First A\-P\-P\-S min output voltage (0.\-8\-V) \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gac8be8d89c699c40b79d04c0fdf6238f4}{\#define \hyperlink{group___board__model__group_gac8be8d89c699c40b79d04c0fdf6238f4}{T\-P\-S2\-\_\-\-U\-P\-P\-E\-R\-\_\-\-B\-O\-U\-N\-D}~1241}\label{group___board__model__group_gac8be8d89c699c40b79d04c0fdf6238f4}

\begin{DoxyCompactList}\small\item\em Second A\-P\-P\-S max output voltage (1\-V) \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gadfcc723e175ac44e73e38407299ac875}{\#define \hyperlink{group___board__model__group_gadfcc723e175ac44e73e38407299ac875}{T\-P\-S2\-\_\-\-L\-O\-W\-E\-R\-\_\-\-B\-O\-U\-N\-D}~497}\label{group___board__model__group_gadfcc723e175ac44e73e38407299ac875}

\begin{DoxyCompactList}\small\item\em Second A\-P\-P\-S min output voltage (0.\-4\-V) \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga891de03ab9e1bd9a92ffffe69a1b10ca}{\#define \hyperlink{group___board__model__group_ga891de03ab9e1bd9a92ffffe69a1b10ca}{B\-R\-A\-K\-E\-\_\-\-U\-P\-P\-E\-R\-\_\-\-B\-O\-U\-N\-D}~0}\label{group___board__model__group_ga891de03ab9e1bd9a92ffffe69a1b10ca}

\begin{DoxyCompactList}\small\item\em Brake sensor max output voltage (T\-O\-D\-O\-: check Voutmax) \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga0aed20cafcc206360abda47b125432c7}{\#define \hyperlink{group___board__model__group_ga0aed20cafcc206360abda47b125432c7}{B\-R\-A\-K\-E\-\_\-\-L\-O\-W\-E\-R\-\_\-\-B\-O\-U\-N\-D}~\hyperlink{group___board__model__group_ga555a695bf58df062dc03f0e892d95cd7}{A\-D\-C\-\_\-\-M\-A\-X}}\label{group___board__model__group_ga0aed20cafcc206360abda47b125432c7}

\begin{DoxyCompactList}\small\item\em Brake sensor min output voltage (T\-O\-D\-O\-: check Voutmin) \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group___board__model__group_gaedc241164d501dcbc52cde232333c9cf}{void {\bfseries A\-D\-C\-\_\-\-Handler} ()}\label{group___board__model__group_gaedc241164d501dcbc52cde232333c9cf}

\item 
void \hyperlink{group___board__model__group_gace5a444da39d4366693503c53f0841c2}{model\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em This function initializes hardware board. \end{DoxyCompactList}\item 
volatile uint8\-\_\-t \hyperlink{group___board__model__group_ga9239a95f68fab3d9b6832fbe85eb87cd}{get\-\_\-tps1\-\_\-percentage} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of the first A\-P\-P\-S in percentage, retrieved by C\-A\-N servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile uint8\-\_\-t \hyperlink{group___board__model__group_gae563bbe9e3c31913df498ebd7cbf6c10}{get\-\_\-tps2\-\_\-percentage} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of the second A\-P\-P\-S in percentage, retrieved by C\-A\-N servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile uint8\-\_\-t \hyperlink{group___board__model__group_ga6db41e7368919bc4dfafaf4e400ae1a9}{get\-\_\-brake\-\_\-percentage} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of the brake pedal position sensor in percentage, retrieved by C\-A\-N servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile bool \hyperlink{group___board__model__group_gae0acabf32ee7f2a82b2f9149ba3d1978}{get\-\_\-apps\-\_\-plausibility} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of A\-P\-P\-S plausibility retrieved by C\-A\-N servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile bool \hyperlink{group___board__model__group_gad47b702f79115e19d75b22f39b45efeb}{get\-\_\-brake\-\_\-plausibility} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of brake plausibility retrieved by C\-A\-N servizi network, if online, or by analog signal. \end{DoxyCompactList}\item 
volatile uint16\-\_\-t \hyperlink{group___board__model__group_ga36eddbc000c8d1820fd2a644a39c87ea}{get\-\_\-\-S\-C\-\_\-value} ()
\begin{DoxyCompactList}\small\item\em This function returns the value of the S\-C. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group___board__model__group_ga7c7f5690cca986bc3fb2f6dcbda24690}{volatile uint8\-\_\-t {\bfseries tps1\-\_\-adc\-\_\-percentage} = 0}\label{group___board__model__group_ga7c7f5690cca986bc3fb2f6dcbda24690}

\item 
\hypertarget{group___board__model__group_gae1f465253d690605c0948394a3f055f4}{volatile uint8\-\_\-t {\bfseries tps2\-\_\-adc\-\_\-percentage} = 0}\label{group___board__model__group_gae1f465253d690605c0948394a3f055f4}

\item 
\hypertarget{group___board__model__group_ga709add26e40f60e3add32981ea2a5868}{volatile uint8\-\_\-t {\bfseries brake\-\_\-adc\-\_\-percentage} = 0}\label{group___board__model__group_ga709add26e40f60e3add32981ea2a5868}

\item 
\hypertarget{group___board__model__group_ga3e919d1e6477d52b4ccddd497351d3ec}{volatile bool \hyperlink{group___board__model__group_ga3e919d1e6477d52b4ccddd497351d3ec}{apps\-\_\-adc\-\_\-plausibility} = true}\label{group___board__model__group_ga3e919d1e6477d52b4ccddd497351d3ec}

\begin{DoxyCompactList}\small\item\em A\-P\-P\-S plausibility status retrieved by analog acquisition. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gaf6aa7f974533c4306128757d0634572a}{volatile bool \hyperlink{group___board__model__group_gaf6aa7f974533c4306128757d0634572a}{brake\-\_\-adc\-\_\-plausibility} = true}\label{group___board__model__group_gaf6aa7f974533c4306128757d0634572a}

\begin{DoxyCompactList}\small\item\em Brake plausibility status retrieved by analog acquisition. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga3d6043851868b7da3c1d6381f835a559}{volatile uint16\-\_\-t \hyperlink{group___board__model__group_ga3d6043851868b7da3c1d6381f835a559}{tps1\-\_\-value} = 0}\label{group___board__model__group_ga3d6043851868b7da3c1d6381f835a559}

\begin{DoxyCompactList}\small\item\em First A\-P\-P\-S value retrieved directly by analog tps1 signal (\hyperlink{group___board__model__group_gae9aa914854f611488701c96a330b0bd4}{T\-P\-S1\-\_\-\-P\-I\-N}) and filtered after D\-M\-A buffer is filled entirely. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gaa8a9b03858f40eadfd5d3d6c3e266834}{volatile uint16\-\_\-t \hyperlink{group___board__model__group_gaa8a9b03858f40eadfd5d3d6c3e266834}{tps2\-\_\-value} = 0}\label{group___board__model__group_gaa8a9b03858f40eadfd5d3d6c3e266834}

\begin{DoxyCompactList}\small\item\em Second A\-P\-P\-S value retrieved directly by analog tps2 signal (\hyperlink{group___board__model__group_gab13a816bae3ca994897fc6f1cb590a67}{T\-P\-S2\-\_\-\-P\-I\-N}) and filtered after D\-M\-A buffer is filled entirely. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gad7966e70fb4bebc6947eb3fbb059a3c9}{volatile uint16\-\_\-t \hyperlink{group___board__model__group_gad7966e70fb4bebc6947eb3fbb059a3c9}{brake\-\_\-value} = 0}\label{group___board__model__group_gad7966e70fb4bebc6947eb3fbb059a3c9}

\begin{DoxyCompactList}\small\item\em Brake pedal position sensor value retrieved directly by analog brake signal (\hyperlink{group___board__model__group_gad632b56bf4c6259a390c3db91607078e}{B\-R\-A\-K\-E\-\_\-\-P\-I\-N}) and filtered after D\-M\-A buffer is filled entirely. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga0b4151ed3267a5fae4789f4b3ffe7bbd}{volatile uint16\-\_\-t \hyperlink{group___board__model__group_ga0b4151ed3267a5fae4789f4b3ffe7bbd}{S\-C\-\_\-value} = 0}\label{group___board__model__group_ga0b4151ed3267a5fae4789f4b3ffe7bbd}

\begin{DoxyCompactList}\small\item\em S\-C value retrieved directly by analog S\-C signal (\hyperlink{group___board__model__group_gabbdb157ae4ad39d102935c21fa30d1c5}{S\-C\-\_\-\-P\-I\-N}) and filtered after D\-M\-A buffer is filled entirely. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_gaf1d46fb483b2a63c3da25c11688af7c4}{volatile uint16\-\_\-t {\bfseries tps1\-\_\-max} = 2482}\label{group___board__model__group_gaf1d46fb483b2a63c3da25c11688af7c4}

\item 
\hypertarget{group___board__model__group_ga51d40eb16833e50f71e595ab0a45795e}{volatile uint16\-\_\-t {\bfseries tps1\-\_\-low} = 993}\label{group___board__model__group_ga51d40eb16833e50f71e595ab0a45795e}

\item 
\hypertarget{group___board__model__group_ga53381436ea8db96c356db8b305bec988}{volatile uint16\-\_\-t {\bfseries tps2\-\_\-max} = 1241}\label{group___board__model__group_ga53381436ea8db96c356db8b305bec988}

\item 
\hypertarget{group___board__model__group_gab03e92ec2b5f742e5a147a6589d3975e}{volatile uint16\-\_\-t {\bfseries tps2\-\_\-low} = 497}\label{group___board__model__group_gab03e92ec2b5f742e5a147a6589d3975e}

\item 
\hypertarget{group___board__model__group_ga744857a9bc060647cfc4ad47017c5bee}{volatile uint16\-\_\-t {\bfseries brake\-\_\-max} = 0}\label{group___board__model__group_ga744857a9bc060647cfc4ad47017c5bee}

\item 
\hypertarget{group___board__model__group_gaaf843a7e652e5cf9b270d0b211be937c}{volatile uint16\-\_\-t {\bfseries brake\-\_\-low} = 4095}\label{group___board__model__group_gaaf843a7e652e5cf9b270d0b211be937c}

\item 
\hypertarget{group___board__model__group_gad2658b77f345b15c03759c02d1ba0e81}{volatile int {\bfseries bufn}}\label{group___board__model__group_gad2658b77f345b15c03759c02d1ba0e81}

\item 
\hypertarget{group___board__model__group_gafef4d6ed48b3edc5f7a74defba82e7d8}{volatile int {\bfseries obufn}}\label{group___board__model__group_gafef4d6ed48b3edc5f7a74defba82e7d8}

\item 
\hypertarget{group___board__model__group_gabaadbcc3b48e8ec3798741a74a672046}{volatile uint16\-\_\-t \hyperlink{group___board__model__group_gabaadbcc3b48e8ec3798741a74a672046}{buf} \mbox{[}4\mbox{]}\mbox{[}128 $\ast$4\mbox{]}}\label{group___board__model__group_gabaadbcc3b48e8ec3798741a74a672046}

\begin{DoxyCompactList}\small\item\em D\-M\-A buffers\-: \hyperlink{group___board__model__group_gaabe0f927d44a09f458bd5fe5ab4e2f7f}{B\-U\-F\-F\-E\-R\-S} number of buffers each of \hyperlink{group___board__model__group_gaf7b7dc9a200cb1404c280bd500fd1551}{B\-U\-F\-F\-E\-R\-\_\-\-L\-E\-N\-G\-T\-H} size; D\-M\-A is configured in cyclic mode\-: after one of \hyperlink{group___board__model__group_gaabe0f927d44a09f458bd5fe5ab4e2f7f}{B\-U\-F\-F\-E\-R\-S} is filled then D\-M\-A transfer head moves to next buffer in circular indexing. \end{DoxyCompactList}\item 
\hypertarget{group___board__model__group_ga481292a7bd814aefcdc2deb9872f5421}{volatile bool {\bfseries calibrate} = false}\label{group___board__model__group_ga481292a7bd814aefcdc2deb9872f5421}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Board model implementation file. \begin{DoxyAuthor}{Author}
Arella Matteo \par
 (mail\-: \href{mailto:arella.1646983@studenti.uniroma1.it}{\tt arella.\-1646983@studenti.\-uniroma1.\-it}) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2018 
\end{DoxyDate}


Definition in file \hyperlink{model_8cpp_source}{model.\-cpp}.

